{"version":3,"sources":["wmp.es6"],"names":[],"mappings":"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","file":"wmp.js","sourcesContent":["var storesArray;\r\nvar usersArray;\r\nvar hoursArray;\r\nvar budgetObj;\r\nvar startDate;\r\nvar endDate;\r\nvar filteredUserArray;\r\nvar filteredStoresArray;\r\nvar filteredHoursArray;\r\nvar filteredBudgetArray;\r\nvar daysOfWeekArray = [];\r\n\r\n$(() => {\r\n    storesArray = JSON.parse(JSON.stringify(storeObj));\r\n    usersArray = JSON.parse(JSON.stringify(userObj));\r\n    hoursArray = JSON.parse(JSON.stringify(hourObj));\r\n    budgetObj = JSON.parse(JSON.stringify(budgetObj));\r\n\r\n    var store = $(\"#store\");\r\n\r\n    store.change((event) => {\r\n        //Get the selected user from from the drop down\r\n        store = $('#store').val();\r\n\r\n        filteredUserArray = userObj.filter((user) => user.store_id == store);\r\n        filteredStoresArray = storeObj.filter((st) => st.store_id == store);\r\n        filteredHoursArray = hourObj.filter((hour) => hour.store_id == store);\r\n        filteredBudgetArray = budgetObj.filter((budget) => budget.store_id == store);\r\n\r\n        displayUsers();\r\n\r\n        if(aDate != '') {\r\n            $('#dateRange').daterangepicker({\r\n                \"showWeekNumbers\": true,\r\n                \"singleDatePicker\": true,\r\n                \"opens\": \"center\",\r\n                \"startDate\":aDate,\r\n                locale: {\r\n                    format: 'YYYY-MM-DD'\r\n                },\r\n            }, function(start, end, label) {\r\n                $('#dateRange').val(moment(start).format('YYYY-MM-DD'));\r\n                $('#hiddenDate').val(moment(start).format('YYYY-MM-DD'));\r\n                applyFilter();\r\n            });\r\n            getDaysOfTheWeek(aDate);\r\n        }\r\n        else {\r\n            $('#dateRange').daterangepicker({\r\n                \"showWeekNumbers\": true,\r\n                \"singleDatePicker\": true,\r\n                \"opens\": \"center\",\r\n                locale: {\r\n                    format: 'YYYY-MM-DD'\r\n                },\r\n            }, function(start, end, label) {\r\n                $('#dateRange').val(moment(start).format('YYYY-MM-DD'));\r\n                $('#hiddenDate').val(moment(start).format('YYYY-MM-DD'));\r\n                applyFilter();\r\n            });\r\n            getDaysOfTheWeek(moment().startOf('isoWeek'));\r\n        }\r\n        $('#hiddenDate').val($('#dateRange').val());\r\n        calculateHours();\r\n\r\n    });\r\n    //Trigger the drop down change function to load the HTML\r\n    store.trigger('change');\r\n\r\n});\r\n\r\nfunction getDaysOfTheWeek(date) {\r\n    var monday,tuesday,wednesday,thursday,friday,saturday, sunday;\r\n\r\n    sunday =moment(date).day(\"Sunday\").format('YYYY-MM-DD');\r\n    monday = moment(date).day(\"Monday\").format('YYYY-MM-DD');\r\n    tuesday = moment(date).day(\"Tuesday\").format('YYYY-MM-DD');\r\n    wednesday = moment(date).day(\"Wednesday\").format('YYYY-MM-DD');\r\n    thursday = moment(date).day(\"Thursday\").format('YYYY-MM-DD');\r\n    friday = moment(date).day(\"Friday\").format('YYYY-MM-DD');\r\n    saturday = moment(date).day(\"Saturday\").format('YYYY-MM-DD');\r\n\r\n    daysOfWeekArray[daysOfWeekArray.length]=(sunday);\r\n    daysOfWeekArray[daysOfWeekArray.length]=(monday);\r\n    daysOfWeekArray[daysOfWeekArray.length]=(tuesday);\r\n    daysOfWeekArray[daysOfWeekArray.length]=(wednesday);\r\n    daysOfWeekArray[daysOfWeekArray.length]=(thursday);\r\n    daysOfWeekArray[daysOfWeekArray.length]=(friday);\r\n    daysOfWeekArray[daysOfWeekArray.length]=(saturday);\r\n}\r\n\r\nfunction calculateHours(){\r\n    var storeTotalHours = 0;\r\n\r\n    for(var user in userObj) {\r\n        var userTotalHours = 0;\r\n        for (var day in daysOfWeekArray) {\r\n            for (var hour in hourObj) {\r\n                if (hourObj[hour].date.substring(0, 10) == daysOfWeekArray[day]\r\n                    && userObj[user].t_number == hourObj[hour].team_member\r\n                    && userObj[user].privileged != 5) {\r\n                    userTotalHours += parseInt(hourObj[hour].selling_hours);\r\n                    storeTotalHours += parseInt(hourObj[hour].selling_hours);\r\n                }\r\n            }\r\n        }\r\n        $('#totalHours_'+ userObj[user].t_number).text(userTotalHours);\r\n        $('#budget'+ userObj[user].t_number).text(budgetObj[0].CTs); //TODO Need to get this weeks CTs, Currently pulling the first record\r\n\r\n    }\r\n\r\n    //TODO this method broke when we combine the to tables, I think micheal made this method? Maybe he can help. We basically need to run this method for each tabe to show the total hours and hour percent age\r\n        var leftStaticTable = document.getElementById(\"countTable\");\r\n        for(var i = 1, row; row = leftStaticTable.rows[i]; i++){\r\n            var sellingHours = parseInt(row.cells[2].innerHTML);\r\n            if (sellingHours != 0 && sellingHours < storeTotalHours){\r\n                row.cells[3].innerHTML = Math.round((sellingHours/storeTotalHours)*100) + '%'\r\n            }\r\n            else if (sellingHours == 0){\r\n                row.cells[3].innerHTML = '0%'\r\n            }\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n    $('#storeTotalHours').text(storeTotalHours);\r\n}\r\n\r\nfunction displayUsers() {\r\n    var employeeList = \"\";\r\n\r\n    for(var userIndex in filteredUserArray){\r\n        employeeList += `<tr>\r\n                        <td></td>\r\n                        <td>${filteredUserArray[userIndex].first_name}  ${filteredUserArray[userIndex].last_name}</td>\r\n                        <th>${filteredUserArray[userIndex].totalHours}</th>\r\n                        <th>${filteredUserArray[userIndex].hoursPercent}%</th>\r\n                      <tr>`;\r\n    }\r\n\r\n    $(`#employeeList`).html(employeeList);\r\n    //getDaysOfTheWeek();\r\n    //if(aDate != '')\r\n    //    displayEmployeeHours(filteredUserArray, filteredHoursArray, aDate);\r\n    //else\r\n    //    displayEmployeeHours(filteredUserArray, filteredHoursArray, moment().startOf('isoWeek'));\r\n}\r\n\r\nfunction applyFilter() { document.getElementById(\"updateWeekForm\").submit(); }\r\n\r\n/*$(document).ready(function(){\r\n    fakewaffle.responsiveTabs(['md']);\r\n    $('.footable').footable();\r\n});*/\r\n\r\n"]}