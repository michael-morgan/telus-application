{"version":3,"sources":["wmp.es6"],"names":[],"mappings":"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","file":"wmp.js","sourcesContent":["let filteredUsers;\nlet filteredStore;\nlet filteredHours;\nlet filteredBudget;\n\nlet store;\n\nlet startDate;\nlet endDate;\n\n//let daysOfWeekArray = [];\n\n$(() => {\n\tconsole.debug(storeObj);\n\tconsole.debug(userObj);\n\tconsole.debug(hourObj);\n\tconsole.debug(budgetObj);\n\n\tstore = $(\"#store\");\n\n    store.change(event => {\n\n\t\tapplyFilter();\n\t\trenderTables();\n\n        /*displayUsers();\n\n        if(aDate) {\n            $('#dateRange').daterangepicker({\n                \"showWeekNumbers\": true,\n                \"singleDatePicker\": true,\n                \"opens\": \"center\",\n                \"startDate\":aDate,\n                locale: {\n                    format: 'YYYY-MM-DD'\n                },\n            }, function(start, end, label) {\n                $('#dateRange').val(moment(start).format('YYYY-MM-DD'));\n                $('#hiddenDate').val(moment(start).format('YYYY-MM-DD'));\n                applyFilter();\n            });\n            getDaysOfTheWeek(aDate);\n        }\n        else {\n            $('#dateRange').daterangepicker({\n                \"showWeekNumbers\": true,\n                \"singleDatePicker\": true,\n                \"opens\": \"center\",\n                locale: {\n                    format: 'YYYY-MM-DD'\n                },\n            }, function(start, end, label) {\n                $('#dateRange').val(moment(start).format('YYYY-MM-DD'));\n                $('#hiddenDate').val(moment(start).format('YYYY-MM-DD'));\n                applyFilter();\n            });\n            getDaysOfTheWeek(moment().startOf('isoWeek'));\n        }\n\t\t*/\n\n        //$('#hiddenDate').val($('#dateRange').val());\n\t\t//calculateHours();\n    });\n\n\t$('#dateRange').daterangepicker({\n\t\t\"showWeekNumbers\": true,\n\t\t\"showCustomRangeLabel\": false,\n\t\t\"alwaysShowCalendars\": true,\n\t\t\"startDate\": startDate = moment().startOf('day'),\n\t\t\"endDate\": endDate = moment().add(7, 'days'),\n\t\t\"opens\": \"center\",\n\t\tlocale: {\n\t\t\tformat: \"MMMM D, YYYY\"\n\t\t}\n\t}, function(start, end, label) {\n\t\tstartDate = start;\n\t\tendDate = end;\n\n\t\tapplyFilter();\n\t\trenderTables();\n\t});\n\n    //Trigger the drop down change function to load the HTML\n    store.trigger('change');\n});\n\n/*function getDaysOfTheWeek(date) {\n    let monday,tuesday,wednesday,thursday,friday,saturday, sunday;\n\n    sunday = moment(date).day(\"Sunday\").format('YYYY-MM-DD');\n    monday = moment(date).day(\"Monday\").format('YYYY-MM-DD');\n    tuesday = moment(date).day(\"Tuesday\").format('YYYY-MM-DD');\n    wednesday = moment(date).day(\"Wednesday\").format('YYYY-MM-DD');\n    thursday = moment(date).day(\"Thursday\").format('YYYY-MM-DD');\n    friday = moment(date).day(\"Friday\").format('YYYY-MM-DD');\n    saturday = moment(date).day(\"Saturday\").format('YYYY-MM-DD');\n\n    daysOfWeekArray[daysOfWeekArray.length]= (sunday);\n    daysOfWeekArray[daysOfWeekArray.length]= (monday);\n    daysOfWeekArray[daysOfWeekArray.length]= (tuesday);\n    daysOfWeekArray[daysOfWeekArray.length]= (wednesday);\n    daysOfWeekArray[daysOfWeekArray.length]= (thursday);\n    daysOfWeekArray[daysOfWeekArray.length]= (friday);\n    daysOfWeekArray[daysOfWeekArray.length]= (saturday);\n}*/\n\n/*function calculateHours() {\n    let storeTotalHours = 0;\n\n    for(let user in userObj) {\n        let userTotalHours = 0;\n        for (let day in daysOfWeekArray) {\n            for (let hour in hourObj) {\n                if (hourObj[hour].date.substring(0, 10) == daysOfWeekArray[day]\n                    && userObj[user].t_number == hourObj[hour].team_member\n                    && userObj[user].privileged != 5) {\n                    userTotalHours += parseInt(hourObj[hour].selling_hours);\n                    storeTotalHours += parseInt(hourObj[hour].selling_hours);\n                }\n            }\n        }\n\n        $('#totalHours_'+ userObj[user].t_number).text(userTotalHours);\n        $('#budget'+ userObj[user].t_number).text(budgetObj[0].CTs);\n    }\n\n    //TODO this method broke when we combine the to tables, I think micheal made this method? Maybe he can help.\n        let countTable1 = document.getElementById(\"countTable1\");\n        for(let i = 1, row; row = countTable1.rows[i]; i++){\n            let sellingHours = parseInt(row.cells[2].innerHTML);\n            if (sellingHours != 0 && sellingHours < storeTotalHours){\n                row.cells[3].innerHTML = Math.round((sellingHours/storeTotalHours)*100) + '%'\n            }\n            else if (sellingHours == 0){\n                row.cells[3].innerHTML = '0%'\n            }\n        }\n    $('#storeTotalHours').text(storeTotalHours);\n    console.log(storeTotalHours);\n}*/\n\n/*function displayUsers() {\n    let employeeList = \"\";\n\n    for(let userIndex in filteredUserArray) {\n        employeeList += `<tr>\n                            <td></td>\n                            <td>${filteredUserArray[userIndex].first_name} ${filteredUserArray[userIndex].last_name}</td>\n                            <th>${filteredUserArray[userIndex].totalHours}</th>\n                            <th>${filteredUserArray[userIndex].hoursPercent}%</th>\n                         <tr>`;\n    }\n\n    $(`#employeeList`).html(employeeList);\n    //getDaysOfTheWeek();\n    //if(aDate != '')\n    //    displayEmployeeHours(filteredUserArray, filteredHoursArray, aDate);\n    //else\n    //    displayEmployeeHours(filteredUserArray, filteredHoursArray, moment().startOf('isoWeek'));\n}*/\n\nfunction applyFilter() {\n\tlet storeValue = store.val();\n\tconsole.log(\"Value: \" + storeValue);\n\n\tfilteredUsers = _.cloneDeep(_.filter(userObj, user => user.store_id == storeValue));\n\tfilteredStore = _.cloneDeep(_.filter(storeObj, store => store.store_id == storeValue))[0];\n\n\tfilteredHours = _.cloneDeep(\n\t\t_.filter(\n\t\t\t_.filter(hourObj, hour => hour.store_id == storeValue),\n\t\t\thour => {\n\t\t\t\tlet hourDate = new Date(hour.date);\n\n\t\t\t\treturn ((hourDate >= startDate) && (hourDate <= endDate));\n\t\t\t}\n\t\t)\n\t);\n\n\tfilteredBudget = _.cloneDeep(\n\t\t_.filter(\n\t\t\t_.filter(budgetObj, budget => budget.store_id == storeValue),\n\t\t\tbudget => {\n\t\t\t\tlet budgetDate = new Date(budget.date);\n\n\t\t\t\treturn ((budgetDate >= startDate) && (budgetDate <= endDate));\n\t\t\t}\n\t\t)\n\t);\n}\n\nfunction renderTables() {\n\tfor(let index = 1; index <= 5; index++) {\n\t\t$(`#countTable${index}`).html('');\n\t}\n\n\t$('#countTable1').html(getCTContent());\n\t$('#countTable2').html(getRevContent());\n\t$('#countTable3').html(getLSContent());\n\t$('#countTable4').html(getKBSContent());\n\t$('#countTable5').html(getKeyMetrics());\n}\n\nfunction getCTContent() {\n\tlet content = \"\";\n\n\tcontent += `\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td>&nbsp;</td>\n\t\t\t\t<td>&nbsp;</td>\n\t\t\t\t<td>&nbsp;</td>\n\t\t\t\t<td>&nbsp;</td>\n\t\t\t\t<td>26.3</td>\n\t\t\t\t<td data-hide=\"all\">31.6</td>\n\t\t\t\t<td data-hide=\"all\">3</td>\n\t\t\t\t<td data-hide=\"all\">14.26%</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<th>Store ${filteredStore.store_id}</th>\n\t\t\t\t<th>TM Name</th>\n\t\t\t\t<th>Selling Hours</th>\n\t\t\t\t<th>% Hours</th>\n\t\t\t\t<th>Budgets</th>\n\t\t\t\t<th>Goal</th>\n\t\t\t\t<th>Actual</th>\n\t\t\t\t<th>% To Budget</th>\n\t\t\t</tr>\n\t\t</thead>\n\t`;\n\n\tcontent += \"<tbody>\";\n\n\tfor(let user of filteredUsers) {\n\t\tif(user.privileged == 5) { continue; }\n\n\t\tcontent += `\n\t\t\t<tr id=\"${user.t_number}\">\n\t\t\t\t<td></td>\n\t\t\t\t<td>${user.first_name} ${user.last_name}</td>\n\t\t\t\t<td>${\n\t\t\t\t\t_.reduce(\n\t\t\t\t\t\t_.filter(filteredHours, hourObj => user.t_number == hourObj.team_member), \n\t\t\t\t\t\t(total, hour) => total + hour.selling_hours,\n\t\t\t\t\t\t0\n\t\t\t\t\t)\n\t\t\t\t}</td>\n\t\t\t\t<td>${\n\t\t\t\t\t(_.reduce(\n\t\t\t\t\t\t_.filter(filteredHours, hourObj => user.t_number == hourObj.team_member), \n\t\t\t\t\t\t(total, hour) => total + hour.selling_hours,\n\t\t\t\t\t\t0\n\t\t\t\t\t) /\n\t\t\t\t\t_.reduce(\n\t\t\t\t\t\t_.filter(\n\t\t\t\t\t\t\tfilteredHours,\n\t\t\t\t\t\t\thour => hour.team_member == (\n\t\t\t\t\t\t\t\t_.find(\n\t\t\t\t\t\t\t\t\tfilteredUsers,\n\t\t\t\t\t\t\t\t\tuser => (user.t_number == hour.team_member) && (user.privileged < 5)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t|| { t_number: '' }\n\t\t\t\t\t\t\t).t_number\n\t\t\t\t\t\t),\n\t\t\t\t\t\t(total, hour) => total + hour.selling_hours, 0\n\t\t\t\t\t)) * 100\n\t\t\t\t}</td>\n\t\t\t\t<td>${filteredBudget.length ? filteredBudget[0].CTs : 0}</td>\n\t\t\t\t<td>26.3</td>\n\t\t\t\t<td>26.3</td>\n\t\t\t\t<td>&nbsp;</td>\n\t\t\t</tr>\n\t\t`;\n\t}\n\n\tcontent += \"</tbody>\";\n\n\tcontent += `\n\t\t<tfoot>\n\t\t\t<tr>\n\t\t\t\t<th class=\"pls\" colspan=\"8\">~ Store Actual Totals Listed Below ~</th>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>Store Total</td>\n\t\t\t\t<td></td>\n\t\t\t\t<td id=\"storeTotalHours\"></td>\n\t\t\t\t<td>100%</td>\n\t\t\t\t<td>$180</td>\n\t\t\t\t<td>$210</td>\n\t\t\t\t<td>$555</td>\n\t\t\t\t<td>100%</td>\n\t\t\t</tr>\n\t\t</tfoot>\n\t`;\n\n\treturn content;\n}\n\nfunction getRevContent() {\n\treturn ``;\n}\n\nfunction getLSContent() {\n\treturn ``;\n}\n\nfunction getKBSContent() {\n\treturn ``;\n}\n\nfunction getKeyMetrics() {\n\treturn ``;\n}"]}