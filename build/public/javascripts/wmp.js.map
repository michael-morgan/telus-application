{"version":3,"sources":["wmp.es6"],"names":[],"mappings":"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","file":"wmp.js","sourcesContent":["var storesArray;\nvar usersArray;\nvar hoursArray;\nvar budgetObj;\nvar startDate;\nvar endDate;\nvar filteredUserArray;\nvar filteredStoresArray;\nvar filteredHoursArray;\nvar filteredBudgetArray;\nvar daysOfWeekArray = [];\n\n$(() => {\n    storesArray = JSON.parse(JSON.stringify(storeObj));\n    usersArray = JSON.parse(JSON.stringify(userObj));\n    hoursArray = JSON.parse(JSON.stringify(hourObj));\n    budgetObj = JSON.parse(JSON.stringify(budgetObj));\n\n    var store = $(\"#store\");\n\n    store.change((event) => {\n        //Get the selected user from from the drop down\n        store = $('#store').val();\n\n        filteredUserArray = userObj.filter((user) => user.store_id == store);\n        filteredStoresArray = storeObj.filter((st) => st.store_id == store);\n        filteredHoursArray = hourObj.filter((hour) => hour.store_id == store);\n        filteredBudgetArray = budgetObj.filter((budget) => budget.store_id == store);\n\n        displayUsers();\n\n        if(aDate != '') {\n            $('#dateRange').daterangepicker({\n                \"showWeekNumbers\": true,\n                \"singleDatePicker\": true,\n                \"opens\": \"center\",\n                \"startDate\":aDate,\n                locale: {\n                    format: 'YYYY-MM-DD'\n                },\n            }, function(start, end, label) {\n                $('#dateRange').val(moment(start).format('YYYY-MM-DD'));\n                $('#hiddenDate').val(moment(start).format('YYYY-MM-DD'));\n                applyFilter();\n            });\n            getDaysOfTheWeek(aDate);\n        }\n        else {\n            $('#dateRange').daterangepicker({\n                \"showWeekNumbers\": true,\n                \"singleDatePicker\": true,\n                \"opens\": \"center\",\n                locale: {\n                    format: 'YYYY-MM-DD'\n                },\n            }, function(start, end, label) {\n                $('#dateRange').val(moment(start).format('YYYY-MM-DD'));\n                $('#hiddenDate').val(moment(start).format('YYYY-MM-DD'));\n                applyFilter();\n            });\n            getDaysOfTheWeek(moment().startOf('isoWeek'));\n        }\n        $('#hiddenDate').val($('#dateRange').val());\n        calculateHours();\n\n    });\n    //Trigger the drop down change function to load the HTML\n    store.trigger('change');\n\n});\n\nfunction getDaysOfTheWeek(date) {\n    var monday,tuesday,wednesday,thursday,friday,saturday, sunday;\n\n    sunday =moment(date).day(\"Sunday\").format('YYYY-MM-DD');\n    monday = moment(date).day(\"Monday\").format('YYYY-MM-DD');\n    tuesday = moment(date).day(\"Tuesday\").format('YYYY-MM-DD');\n    wednesday = moment(date).day(\"Wednesday\").format('YYYY-MM-DD');\n    thursday = moment(date).day(\"Thursday\").format('YYYY-MM-DD');\n    friday = moment(date).day(\"Friday\").format('YYYY-MM-DD');\n    saturday = moment(date).day(\"Saturday\").format('YYYY-MM-DD');\n\n    daysOfWeekArray[daysOfWeekArray.length]=(sunday);\n    daysOfWeekArray[daysOfWeekArray.length]=(monday);\n    daysOfWeekArray[daysOfWeekArray.length]=(tuesday);\n    daysOfWeekArray[daysOfWeekArray.length]=(wednesday);\n    daysOfWeekArray[daysOfWeekArray.length]=(thursday);\n    daysOfWeekArray[daysOfWeekArray.length]=(friday);\n    daysOfWeekArray[daysOfWeekArray.length]=(saturday);\n}\n\nfunction calculateHours(){\n    var storeTotalHours = 0;\n\n    for(var user in userObj) {\n        var userTotalHours = 0;\n        for (var day in daysOfWeekArray) {\n            for (var hour in hourObj) {\n                if (hourObj[hour].date.substring(0, 10) == daysOfWeekArray[day]\n                    && userObj[user].t_number == hourObj[hour].team_member\n                    && userObj[user].privileged != 5) {\n                    userTotalHours += parseInt(hourObj[hour].selling_hours);\n                    storeTotalHours += parseInt(hourObj[hour].selling_hours);\n                }\n            }\n        }\n        $('#totalHours_'+ userObj[user].t_number).text(userTotalHours);\n        $('#budget'+ userObj[user].t_number).text(budgetObj[0].CTs);\n\n    }\n\n    //TODO this method broke when we combine the to tables, I think micheal made this method? Maybe he can help.\n        var countTable1 = document.getElementById(\"countTable1\");\n        for(var i = 1, row; row = countTable1.rows[i]; i++){\n            var sellingHours = parseInt(row.cells[2].innerHTML);\n            if (sellingHours != 0 && sellingHours < storeTotalHours){\n                row.cells[3].innerHTML = Math.round((sellingHours/storeTotalHours)*100) + '%'\n            }\n            else if (sellingHours == 0){\n                row.cells[3].innerHTML = '0%'\n            }\n        }\n    $('#storeTotalHours').text(storeTotalHours);\n    console.log(storeTotalHours);\n}\n\nfunction displayUsers() {\n    var employeeList = \"\";\n\n    for(var userIndex in filteredUserArray){\n        employeeList += `<tr>\n                            <td></td>\n                            <td>${filteredUserArray[userIndex].first_name}  ${filteredUserArray[userIndex].last_name}</td>\n                            <th>${filteredUserArray[userIndex].totalHours}</th>\n                            <th>${filteredUserArray[userIndex].hoursPercent}%</th>\n                         <tr>`;\n    }\n\n    $(`#employeeList`).html(employeeList);\n    //getDaysOfTheWeek();\n    //if(aDate != '')\n    //    displayEmployeeHours(filteredUserArray, filteredHoursArray, aDate);\n    //else\n    //    displayEmployeeHours(filteredUserArray, filteredHoursArray, moment().startOf('isoWeek'));\n}\n\nfunction applyFilter() { document.getElementById(\"updateWeekForm\").submit(); }\n\n/*$(document).ready(function(){\n    fakewaffle.responsiveTabs(['md']);\n    $('.footable').footable();\n});*/\n\n"]}