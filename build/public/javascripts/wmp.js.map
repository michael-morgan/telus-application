{"version":3,"sources":["wmp.es6"],"names":[],"mappings":"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","file":"wmp.js","sourcesContent":["let filteredUsers;\r\nlet filteredStore;\r\nlet filteredHours;\r\nlet filteredBudget;\r\n\r\nlet store;\r\n\r\nlet startDate;\r\nlet endDate;\r\n\r\n//let daysOfWeekArray = [];\r\n\r\n$(() => {\r\n\tconsole.debug(storeObj);\r\n\tconsole.debug(userObj);\r\n\tconsole.debug(hourObj);\r\n\tconsole.debug(budgetObj);\r\n\r\n\tstore = $(\"#store\");\r\n\r\n    store.change(event => {\r\n\r\n\t\tapplyFilter();\r\n\t\trenderTables();\r\n\r\n        /*displayUsers();\r\n\r\n        if(aDate) {\r\n            $('#dateRange').daterangepicker({\r\n                \"showWeekNumbers\": true,\r\n                \"singleDatePicker\": true,\r\n                \"opens\": \"center\",\r\n                \"startDate\":aDate,\r\n                locale: {\r\n                    format: 'YYYY-MM-DD'\r\n                },\r\n            }, function(start, end, label) {\r\n                $('#dateRange').val(moment(start).format('YYYY-MM-DD'));\r\n                $('#hiddenDate').val(moment(start).format('YYYY-MM-DD'));\r\n                applyFilter();\r\n            });\r\n            getDaysOfTheWeek(aDate);\r\n        }\r\n        else {\r\n            $('#dateRange').daterangepicker({\r\n                \"showWeekNumbers\": true,\r\n                \"singleDatePicker\": true,\r\n                \"opens\": \"center\",\r\n                locale: {\r\n                    format: 'YYYY-MM-DD'\r\n                },\r\n            }, function(start, end, label) {\r\n                $('#dateRange').val(moment(start).format('YYYY-MM-DD'));\r\n                $('#hiddenDate').val(moment(start).format('YYYY-MM-DD'));\r\n                applyFilter();\r\n            });\r\n            getDaysOfTheWeek(moment().startOf('isoWeek'));\r\n        }\r\n\t\t*/\r\n\r\n        //$('#hiddenDate').val($('#dateRange').val());\r\n\t\t//calculateHours();\r\n    });\r\n\r\n\t$('#dateRange').daterangepicker({\r\n\t\t\"showWeekNumbers\": true,\r\n\t\t\"showCustomRangeLabel\": false,\r\n\t\t\"alwaysShowCalendars\": true,\r\n\t\t\"startDate\": startDate = moment().startOf('day'),\r\n\t\t\"endDate\": endDate = moment().add(7, 'days'),\r\n\t\t\"opens\": \"center\",\r\n\t\tlocale: {\r\n\t\t\tformat: \"MMMM D, YYYY\"\r\n\t\t}\r\n\t}, function(start, end, label) {\r\n\t\tstartDate = start;\r\n\t\tendDate = end;\r\n\r\n\t\tapplyFilter();\r\n\t\trenderTables();\r\n\t});\r\n\r\n    //Trigger the drop down change function to load the HTML\r\n    store.trigger('change');\r\n});\r\n\r\n/*function getDaysOfTheWeek(date) {\r\n    let monday,tuesday,wednesday,thursday,friday,saturday, sunday;\r\n\r\n    sunday = moment(date).day(\"Sunday\").format('YYYY-MM-DD');\r\n    monday = moment(date).day(\"Monday\").format('YYYY-MM-DD');\r\n    tuesday = moment(date).day(\"Tuesday\").format('YYYY-MM-DD');\r\n    wednesday = moment(date).day(\"Wednesday\").format('YYYY-MM-DD');\r\n    thursday = moment(date).day(\"Thursday\").format('YYYY-MM-DD');\r\n    friday = moment(date).day(\"Friday\").format('YYYY-MM-DD');\r\n    saturday = moment(date).day(\"Saturday\").format('YYYY-MM-DD');\r\n\r\n    daysOfWeekArray[daysOfWeekArray.length]= (sunday);\r\n    daysOfWeekArray[daysOfWeekArray.length]= (monday);\r\n    daysOfWeekArray[daysOfWeekArray.length]= (tuesday);\r\n    daysOfWeekArray[daysOfWeekArray.length]= (wednesday);\r\n    daysOfWeekArray[daysOfWeekArray.length]= (thursday);\r\n    daysOfWeekArray[daysOfWeekArray.length]= (friday);\r\n    daysOfWeekArray[daysOfWeekArray.length]= (saturday);\r\n}*/\r\n\r\n/*function calculateHours() {\r\n    let storeTotalHours = 0;\r\n\r\n    for(let user in userObj) {\r\n        let userTotalHours = 0;\r\n        for (let day in daysOfWeekArray) {\r\n            for (let hour in hourObj) {\r\n                if (hourObj[hour].date.substring(0, 10) == daysOfWeekArray[day]\r\n                    && userObj[user].t_number == hourObj[hour].team_member\r\n                    && userObj[user].privileged != 5) {\r\n                    userTotalHours += parseInt(hourObj[hour].selling_hours);\r\n                    storeTotalHours += parseInt(hourObj[hour].selling_hours);\r\n                }\r\n            }\r\n        }\r\n\r\n        $('#totalHours_'+ userObj[user].t_number).text(userTotalHours);\r\n        $('#budget'+ userObj[user].t_number).text(budgetObj[0].CTs);\r\n    }\r\n\r\n    //TODO this method broke when we combine the to tables, I think micheal made this method? Maybe he can help.\r\n        let countTable1 = document.getElementById(\"countTable1\");\r\n        for(let i = 1, row; row = countTable1.rows[i]; i++){\r\n            let sellingHours = parseInt(row.cells[2].innerHTML);\r\n            if (sellingHours != 0 && sellingHours < storeTotalHours){\r\n                row.cells[3].innerHTML = Math.round((sellingHours/storeTotalHours)*100) + '%'\r\n            }\r\n            else if (sellingHours == 0){\r\n                row.cells[3].innerHTML = '0%'\r\n            }\r\n        }\r\n    $('#storeTotalHours').text(storeTotalHours);\r\n    console.log(storeTotalHours);\r\n}*/\r\n\r\n/*function displayUsers() {\r\n    let employeeList = \"\";\r\n\r\n    for(let userIndex in filteredUserArray) {\r\n        employeeList += `<tr>\r\n                            <td></td>\r\n                            <td>${filteredUserArray[userIndex].first_name} ${filteredUserArray[userIndex].last_name}</td>\r\n                            <th>${filteredUserArray[userIndex].totalHours}</th>\r\n                            <th>${filteredUserArray[userIndex].hoursPercent}%</th>\r\n                         <tr>`;\r\n    }\r\n\r\n    $(`#employeeList`).html(employeeList);\r\n    //getDaysOfTheWeek();\r\n    //if(aDate != '')\r\n    //    displayEmployeeHours(filteredUserArray, filteredHoursArray, aDate);\r\n    //else\r\n    //    displayEmployeeHours(filteredUserArray, filteredHoursArray, moment().startOf('isoWeek'));\r\n}*/\r\n\r\nfunction applyFilter() {\r\n\tlet storeValue = store.val();\r\n\tconsole.log(\"Value: \" + storeValue);\r\n\r\n\tfilteredUsers = _.cloneDeep(_.filter(userObj, user => user.store_id == storeValue));\r\n\tfilteredStore = _.cloneDeep(_.filter(storeObj, store => store.store_id == storeValue))[0];\r\n\tfilteredHours = _.cloneDeep(\r\n\t\t_.filter(\r\n\t\t\t_.filter(hourObj, hour => hour.store_id == storeValue),\r\n\t\t\thour => {\r\n\t\t\t\tlet hourDate = new Date(hour.date);\r\n\r\n\r\n\r\n\t\t\t\treturn ((hourDate >= startDate) && (hourDate <= endDate));\r\n\t\t\t}\r\n\t\t)\r\n\t);\r\n\r\n\tconsole.debug(filteredHours);\r\n\r\n\tfilteredBudget = _.cloneDeep(\r\n\t\t_.filter(\r\n\t\t\t_.filter(budgetObj, budget => budget.store_id == storeValue),\r\n\t\t\tbudget => {\r\n\t\t\t\tlet budgetDate = new Date(budget.date);\r\n\r\n\t\t\t\treturn ((budgetDate >= startDate) && (budgetDate <= endDate));\r\n\t\t\t}\r\n\t\t)\r\n\t);\r\n}\r\n\r\nfunction renderTables() {\r\n\tfor(let index = 1; index <= 5; index++) {\r\n\t\t$(`#countTable${index}`).html('');\r\n\t}\r\n\r\n\t$('#countTable1').html(getCTContent());\r\n\t$('#countTable2').html(getRevContent());\r\n\t$('#countTable3').html(getLSContent());\r\n\t$('#countTable4').html(getKBSContent());\r\n\t$('#countTable5').html(getKeyMetrics());\r\n}\r\n\r\nfunction getCTContent() {\r\n\tlet content = \"\";\r\n\r\n\tcontent += `\r\n\t\t<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t<td>&nbsp;</td>\r\n\t\t\t\t<td>&nbsp;</td>\r\n\t\t\t\t<td>&nbsp;</td>\r\n\t\t\t\t<td>&nbsp;</td>\r\n\t\t\t\t<td>26.3</td>\r\n\t\t\t\t<td data-hide=\"all\">31.6</td>\r\n\t\t\t\t<td data-hide=\"all\">3</td>\r\n\t\t\t\t<td data-hide=\"all\">14.26%</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<th>Store ${filteredStore.store_id}</th>\r\n\t\t\t\t<th>TM Name</th>\r\n\t\t\t\t<th>Selling Hours</th>\r\n\t\t\t\t<th>% Hours</th>\r\n\t\t\t\t<th>Budgets</th>\r\n\t\t\t\t<th>Goal</th>\r\n\t\t\t\t<th>Actual</th>\r\n\t\t\t\t<th>% To Budget</th>\r\n\t\t\t</tr>\r\n\t\t</thead>\r\n\t`;\r\n\r\n\tcontent += \"<tbody>\";\r\n\r\n\tfor(let user of filteredUsers) {\r\n\t\tif(user.privileged == 5) { continue; }\r\n\r\n\t\tcontent += `\r\n\t\t\t<tr id=\"${user.t_number}\">\r\n\t\t\t\t<td></td>\r\n\t\t\t\t<td>${user.first_name} ${user.last_name}</td>\r\n\t\t\t\t<td>${filteredHours.filter(hourObj => user.t_number == hourObj.team_member).reduce((total, hour) => total + hour.selling_hours, 0)}</td>\r\n\t\t\t\t<td>${parseFloat(user.hoursPercent).toFixed(2)}</td>\r\n\t\t\t\t<td>${filteredBudget.length ? filteredBudget[0].CTs : 0}</td>\r\n\t\t\t\t<td>26.3</td>\r\n\t\t\t\t<td>26.3</td>\r\n\t\t\t\t<td>&nbsp;</td>\r\n\t\t\t</tr>\r\n\t\t`;\r\n\t}\r\n\r\n\tcontent += \"</tbody>\";\r\n\r\n\tcontent += `\r\n\t\t<tfoot>\r\n\t\t\t<tr>\r\n\t\t\t\t<th class=\"pls\" colspan=\"8\">~ Store Actual Totals Listed Below ~</th>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td>Store Total</td>\r\n\t\t\t\t<td></td>\r\n\t\t\t\t<td id=\"storeTotalHours\"></td>\r\n\t\t\t\t<td>100%</td>\r\n\t\t\t\t<td>$180</td>\r\n\t\t\t\t<td>$210</td>\r\n\t\t\t\t<td>$555</td>\r\n\t\t\t\t<td>100%</td>\r\n\t\t\t</tr>\r\n\t\t</tfoot>\r\n\t`;\r\n\r\n\treturn content;\r\n}\r\n\r\nfunction getRevContent() {\r\n\treturn ``;\r\n}\r\n\r\nfunction getLSContent() {\r\n\treturn ``;\r\n}\r\n\r\nfunction getKBSContent() {\r\n\treturn ``;\r\n}\r\n\r\nfunction getKeyMetrics() {\r\n\treturn ``;\r\n}"]}