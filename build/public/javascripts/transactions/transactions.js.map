{"version":3,"sources":["transactions.es6"],"names":[],"mappings":"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","file":"transactions.js","sourcesContent":["var filteredArray;\nvar teamMember;\nvar filterTeamMembers = function(transaction) {\n    teamMember = $('#teamMember');\n    //If the 'All Team Members' was chosen from the drop down, show all transactions\n    if(teamMember.val() == 'all')\n        return transaction.t_number != teamMember.val();\n    //If a team member was chosen from the drop down, show transactions related to that user\n    else\n        return transaction.t_number == teamMember.val();\n}, filterDate = function(transaction) {\n    var transactionDate = new Date(transaction.transaction_date);\n\n    return ((transactionDate >= startDate) && (transactionDate <= endDate));\n};\nvar startDate;\nvar endDate;\n$(function() {\n    //console.debug(storeObj);\n    //console.debug(userObj);\n    //Hide the delete message until a transaction has been removed\n    $('#deleteMessage').hide();\n    //Fade out success message after 5 secconds\n    $('#successMessage').fadeOut(5000);\n\n    var teamDropdown = $(\"#teamMember\");\n\n    teamDropdown.change(function () {\n        //Get the selected user from from the drop down\n        teamMember = $('#teamMember');\n        filteredArray = storeObj[0].transactions.filter(filterTeamMembers);\n\n        //Render the transactions and edit the HTML based on team member drop down\n        renderTransactions(teamMember.val(), userObj, storeObj[0].privileged, filteredArray.filter(filterDate));\n    });\n\n    $('#dateRange').daterangepicker({\n        \"showWeekNumbers\": true,\n        \"showCustomRangeLabel\": false,\n        \"alwaysShowCalendars\": true,\n        \"startDate\": startDate = moment().startOf('day'),\n        \"endDate\": endDate = moment().add(7, 'days'),\n        \"opens\": \"center\",\n        locale: {\n            format: \"MMMM D, YYYY\"\n        }\n    }, function(start, end, label) {\n        console.log(\"New date range selected: ' + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD') + ' (predefined range: ' + label + ')\");\n        startDate = start;\n        endDate = end;\n\n        //Render the transactions and edit the HTML based on team member drop down\n        renderTransactions(teamMember.val(), userObj, storeObj[0].privileged, filteredArray.filter(filterDate));\n    });\n\n    //Trigger the drop down change function to load the HTML\n    teamDropdown.trigger('change');\n});\n\n\n/**\n * Delete a transaction, uses AJAX\n * @param id\n */\nfunction deleteTransaction(id) {\n    bootbox.confirm(\"Are you sure you want to delete this transaction?\", function(result) {\n        if (result == true) {\n            $.post(\"/users/transactions\", {'id': id}).done(function(result) {\n                $('#transactionID' + id).remove();\n                $('#deleteMessage').show();\n                $('#removalMessage').html(\"The transaction was successfully deleted.\");\n                $('#deleteMessage').fadeOut(5000);\n            });\n        } //end if\n    }); //end confirm;\n} //end deleteTransaction\n\n/**\n * This method filter the transactions history by filtering though the array\n * @param t_num\n * @param users\n * @param privileged\n * @param transactions\n */\nfunction renderTransactions(t_num, users, privileged, transactions) {\n    if(transactions.length > 0) {\n        filteredArray = transactions;\n    }\n    //console.debug(filteredArray);\n\n    //Initialize variables for storing data\n    var totalDeviceCount = 0;\n    var deviceCount = 0;\n    var appleDeviceCount = 0;\n    var deviceWarrantyCount = 0;\n    var appleWarrantyCount = 0;\n    var transactionCount = 0;\n    var accessoriesCount = 0;\n    var controllableTransactionsCount = 0;\n    var controllableRevenue = 0;\n    var warrantyDevices = 0;\n    var otherDevices = 0;\n    var sbsCount = 0;\n    var tabletCount = 0;\n    var hsRevenue = 0;\n    var learningSessions = 0;\n    var critters = 0;\n    var appointments = 0;\n    var aotm = 0;\n    var donations = 0;\n    var creditCards = 0;\n\n    //Loop through all the transactions\n    for (var transactionIndex in transactions) {\n\n        //If 'All Team Members' was selected, count all transactions\n        if (t_num == 'all')\n            transactionCount = transactions.length;\n        //If a team member was chosen, only show transactions related to them\n        else {\n            if (transactions[transactionIndex].t_number == t_num)\n                transactionCount++\n        } //end if\n\n        //Loop through the transactionsItems for each transactions\n        for (var transactionItemsIndex in transactions[transactionIndex].transactionItems) {\n\n            //If device type is 2 (Android) or 3 (Blackberry), increment the deviceCount\n            if (transactions[transactionIndex].transactionItems[transactionItemsIndex].device_type == 2 || transactions[transactionIndex].transactionItems[transactionItemsIndex].device_type == 3)\n                deviceCount++;\n\n            //If device type is 1 (iPhone) or 7 (iPad), increment the appleDeviceCount\n            else if (transactions[transactionIndex].transactionItems[transactionItemsIndex].device_type == 1 || transactions[transactionIndex].transactionItems[transactionItemsIndex].device_type == 7)\n                appleDeviceCount++;\n\n            //If device type is not 5 (SIM), increment the totalDeviceCount\n            if (transactions[transactionIndex].transactionItems[transactionItemsIndex].device_type != 5)\n                totalDeviceCount++;\n\n            //If the transaction type is 1 (Device), add the revenue of the transaction to hsRevenue\n            if (transactions[transactionIndex].transaction_type == 1)\n                hsRevenue += transactions[transactionIndex].transactionItems[transactionItemsIndex].revenue;\n\n            //If the warranty type is 1 (Device Care) or 2 (Device Care & T-UP), increment the deviceWarrantyCount\n            if (transactions[transactionIndex].transactionItems[transactionItemsIndex].warranty_type == 1 || transactions[transactionIndex].transactionItems[transactionItemsIndex].warranty_type == 2)\n                deviceWarrantyCount++;\n\n            //If the warranty type is 3 (AppleCare+) or 4 (AppleCare+ & T-UP), increment the appleWarrantyCount\n            else if (transactions[transactionIndex].transactionItems[transactionItemsIndex].warranty_type == 3 || transactions[transactionIndex].transactionItems[transactionItemsIndex].warranty_type == 4)\n                appleWarrantyCount++;\n\n            //If the warranty type is 1 (New Activation) or 2 (Renewal), increment the controllableTransactionsCount\n            if (transactions[transactionIndex].transactionItems[transactionItemsIndex].activation_type == 1 || transactions[transactionIndex].transactionItems[transactionItemsIndex].activation_type == 2)\n                controllableTransactionsCount++;\n\n            //If 'All Team Members' was selected, sum up all the revenue\n            if (t_num == 'all')\n                controllableRevenue += transactions[transactionIndex].transactionItems[transactionItemsIndex].revenue;\n            //If a team member was chosen, sum up transactions related to them\n            else {\n                if (transactions[transactionIndex].t_number == t_num)\n                    controllableRevenue += transactions[transactionIndex].transactionItems[transactionItemsIndex].revenue;\n            }\n\n            //If the device_type is not 5 (SIM) or 8 (Mobile Internet), increment the warrantyDevices\n            if (transactions[transactionIndex].transactionItems[transactionItemsIndex].device_type != 5 || transactions[transactionIndex].transactionItems[transactionItemsIndex].device_type != 8)\n                warrantyDevices++;\n\n            //If the device_type is not 1 (iPhone) or 2 (Android), increment the otherDevices\n            if (transactions[transactionIndex].transactionItems[transactionItemsIndex].device_type != 1 || transactions[transactionIndex].transactionItems[transactionItemsIndex].device_type != 2)\n                otherDevices++;\n\n            //If the sbs_activation is 1 (Yes), increment the sbsCount\n            if (transactions[transactionIndex].transactionItems[transactionItemsIndex].sbs_activation == 1)\n                sbsCount++;\n\n            //If the device_type is 6 (tablet), increment the tabletCount\n            if (transactions[transactionIndex].transactionItems[transactionItemsIndex].device_type == 6 || transactions[transactionIndex].transactionItems[transactionItemsIndex].device_type == 7)\n                tabletCount++;\n\n            //Sum up all the num_of_accessories\n            accessoriesCount += transactions[transactionIndex].transactionItems[transactionItemsIndex].num_of_accessories;\n        }//end for transactionItemsIndex\n\n        //Loop through all the additionalMetricItems per transaction\n        for (var metricItemsIndex in transactions[transactionIndex].additionalMetricItems) {\n            //Check based on the additional metric type\n            switch (transactions[transactionIndex].additionalMetricItems[metricItemsIndex].additional_metrics_items_type) {\n                //If metric type is 1 (Learning Sessions), add the metric count to learningSessions\n                case 1:\n                    learningSessions += transactions[transactionIndex].additionalMetricItems[metricItemsIndex].additional_metrics_items_count\n                    break\n                //If metric type is 2 (AOTM), add the metric count to aotm\n                case 2:\n                    aotm += transactions[transactionIndex].additionalMetricItems[metricItemsIndex].additional_metrics_items_count\n                    break;\n                //If metric type is 3 (Appointments), add the metric count to appointments\n                case 3:\n                    appointments += transactions[transactionIndex].additionalMetricItems[metricItemsIndex].additional_metrics_items_count\n                    break;\n                //If metric type is 4 (Critters), add the metric count to critters\n                case 4:\n                    critters += transactions[transactionIndex].additionalMetricItems[metricItemsIndex].additional_metrics_items_count\n                    break;\n                //If metric type is 5 (Donations), add the metric count to donations\n                case 5:\n                    donations += transactions[transactionIndex].additionalMetricItems[metricItemsIndex].additional_metrics_items_count\n                    break;\n                //If metric type is 6 (Credit Cards), add the metric count to creditCards\n                case 6:\n                    creditCards += transactions[transactionIndex].additionalMetricItems[metricItemsIndex].additional_metrics_items_count\n                    break;\n            } //end switch\n        } //end for metricItemsIndex\n    } //end for transactionIndex\n\n    var summaryContent = '';\n    summaryContent += `\n        <div role=\"tablist\" aria-multiselectable=\"true\" class=\"panel-group\">\n            <div class=\"panel\">\n                <div class=\"panel panel-default\">\n                    <div role=\"tab\" id=\"transactionHeading\" data-toggle=\"collapse\" data-target=\"#transactionCollapse\" class=\"panel-heading purpleHead collapsed\" aria-expanded=\"false\">\n                        <div class=\"row\">\n                            <div class=\"col-xs-4 text-center\">\n                                <h4 class=\"panel-title\">Acc. Units per Transaction:\n                                    <strong style=\"margin-left: 5px;\">`;\n                                        //If transactionsCount is 0, display 0\n                                        if (transactionCount <= 0)\n                                            summaryContent += `0%`;\n                                        //Else display the value\n                                        else\n                                            summaryContent += `${parseFloat(Math.round(accessoriesCount / transactionCount)).toFixed(2)}`;\n                                        summaryContent += `\n                                    </strong>\n                                </h4>\n                            </div><!--end col-xs-4 text-center-->\n                            <div class=\"col-xs-4 text-center\">\n                                <h4 class=\"panel-title\">Basket Size:\n                                    <strong style=\"margin-left: 5px;\">`;\n                                        //If transactionsCount is 0, display 0\n                                        if (transactionCount <= 0)\n                                            summaryContent += `${(0).toLocaleString('en-CA', {style: 'currency', currency: 'CAD'})}`;\n                                        //Else display the value\n                                        else\n                                            summaryContent += ` ${(controllableRevenue / transactionCount).toLocaleString('en-CA', {style: 'currency',currency: 'CAD'})}`;\n                    summaryContent += `\n                                    </strong>\n                                </h4>\n                            </div><!--end col-xs-4 text-center-->\n                            <div class=\"col-xs-4 text-center\">\n                                <h4 class=\"panel-title\">Average $ per HS:\n                                    <strong style=\"margin-left: 5px;\">`;\n                                        //If totalDeviceCount is 0, display 0\n                                        if (totalDeviceCount <= 0)\n                                            summaryContent += `${(0).toLocaleString('en-CA', {style: 'currency', currency: 'CAD'})}`;\n                                        //Else display the value\n                                        else\n                                            summaryContent += ` ${(hsRevenue / totalDeviceCount).toLocaleString('en-CA', {style: 'currency',currency: 'CAD' })}`;\n                    summaryContent += `\n                                    </strong>\n                                </h4>\n                            </div><!--end row-->\n                        </div><!--end -->\n                    </div><!--end panel-heading purpleHead collapsed-->\n                    <div role=\"tabpanel\" aria-labelledby=\"transactionHeading\" id=\"transactionCollapse\" class=\"panel-collapse collapse\" aria-expanded=\"false\" style=\"height: 0px;\">\n                        <div class=\"panel-body\">\n                            <div class=\"panel panel-default\">\n                                <div class=\"panel-body\">\n                                    <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                                        <strong>Number of Transactions:</strong>\n                                        <span style=\"margin-left: 5px;\">${transactionCount}</span>\n                                    </div><!--end col-xs-12 col-sm-6 col-md-4-->\n                                    <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                                        <strong>Device Care:</strong>\n                                        <span style=\"margin-left: 5px;\">`;\n                                            //If deviceCount is 0, display 0\n                                            if (deviceCount <= 0)\n                                                summaryContent += `0%`;\n                                            //Else display the value\n                                            else\n                                                summaryContent += `${parseInt(deviceWarrantyCount / deviceCount * 100, 10)}%`;\n                                            summaryContent += `\n                                        </span>\n                                    </div><!--end col-xs-12 col-sm-6 col-md-4-->\n                                    <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                                        <strong>iPhone:</strong>\n                                        <span style=\"margin-left: 5px;\">${appleDeviceCount}</span>\n                                    </div><!--end col-xs-12 col-sm-6 col-md-4-->\n                                    <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                                        <strong>Controllable Transactions:</strong>\n                                        <span style=\"margin-left: 5px;\">${controllableTransactionsCount}</span>\n                                    </div><!--end col-xs-12 col-sm-6 col-md-4-->\n                                    <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                                        <strong>AppleCare:</strong>\n                                        <span style=\"margin-left: 5px;\">`;\n                                            //If appleDeviceCount is 0, display 0\n                                            if (appleDeviceCount <= 0)\n                                                summaryContent += `0%`;\n                                            //Else display the value\n                                            else\n                                                summaryContent += `${parseInt(appleWarrantyCount / appleDeviceCount * 100, 10)}%`;\n                                            summaryContent += `\n                                        </span>\n                                    </div><!--end col-xs-12 col-sm-6 col-md-4-->\n                                    <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                                        <strong>Android:</strong>\n                                        <span style=\"margin-left: 5px;\">${deviceCount}</span>\n                                    </div><!--end col-xs-12 col-sm-6 col-md-4-->\n                                    <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                                        <strong>Controllable Revenue:</strong>\n                                        <span style=\"margin-left: 5px;\">${controllableRevenue.toLocaleString('en-CA', {style: 'currency',currency: 'CAD'})}</span>\n                                    </div><!--end col-xs-12 col-sm-6 col-md-4-->\n                                    <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                                        <strong>Warranty:</strong>\n                                        <span style=\"margin-left: 5px;\">`;\n                                            //If warrantyDevices is 0, display 0\n                                            if (warrantyDevices <= 0)\n                                                summaryContent += `0%`;\n                                            //Else display the value\n                                            else\n                                                summaryContent += `${parseInt(appleWarrantyCount + deviceWarrantyCount / warrantyDevices * 100, 10)}%`;\n                                            summaryContent += `\n                                        </span>\n                                    </div><!--end col-xs-12 col-sm-6 col-md-4-->\n                                    <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                                        <strong>Other Devices:</strong>\n                                        <span style=\"margin-left: 5px;\">${otherDevices}</span>\n                                    </div><!--end col-xs-12 col-sm-6 col-md-4-->\n                                    <div class=\"col-xs-12\">\n                                        <hr>\n                                    </div><!--end col-xs-12 col-sm-6 col-md-4-->\n                                    <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                                        <strong>SBS Activations:</strong>\n                                        <span style=\"margin-left: 5px;\">${sbsCount}</span>\n                                    </div><!--end col-xs-12 col-sm-6 col-md-4-->\n                                    <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                                        <strong>Learning Sessions:</strong>\n                                        <span style=\"margin-left: 5px;\">${learningSessions}</span>\n                                    </div><!--end col-xs-12 col-sm-6 col-md-4-->\n                                    <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                                        <strong>Critters:</strong>\n                                        <span style=\"margin-left: 5px;\">${critters}</span>\n                                    </div><!--end col-xs-12 col-sm-6 col-md-4-->\n                                    <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                                        <strong>Appointments:</strong>\n                                        <span style=\"margin-left: 5px;\">${appointments}</span>\n                                    </div><!--end col-xs-12 col-sm-6 col-md-4-->\n                                    <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                                        <strong>AOTM:</strong>\n                                        <span style=\"margin-left: 5px;\">${aotm}</span>\n                                    </div><!--end col-xs-12 col-sm-6 col-md-4-->\n                                    <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                                        <strong>Donations:</strong>\n                                        <span style=\"margin-left: 5px;\">${donations}</span>\n                                    </div><!--end col-xs-12 col-sm-6 col-md-4-->\n                                    <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                                        <strong>Credit Cards:</strong>\n                                        <span style=\"margin-left: 5px;\">${creditCards}</span>\n                                    </div><!--end col-xs-12 col-sm-6 col-md-4-->\n                                    <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                                        <strong>Tablets:</strong>\n                                        <span style=\"margin-left: 5px;\">${tabletCount}</span>\n                                    </div><!--end col-xs-12 col-sm-6 col-md-4-->\n                                </div><!--end panel-body-->\n                            </div><!--end panel panel-default -->\n                        </div><!--end panel-body-->\n                    </div><!--end panel-collapse collapse-->\n                </div><!--end panel panel-default -->\n            </div><!--end col-xs-12 col-lg-10 col-lg-offset-1 -->\n        </div><!--end panel group -->`;\n\n    $('#summaryContainer').html(summaryContent);\n\n    var content = '';\n//For each transaction\n    for(var transactionIndex in transactions) {\n        //content hold all the HTML for the filtered array\n        content += `\n       <div id=\"transactionID${transactions[transactionIndex].transaction_id}\" class=\"panel\">\n           <div class=\"panel-heading purpleHead\">\n               <div role=\"tab\" class=\"row\" id=\"transactionHeading${transactions[transactionIndex].transaction_id}\" data-toggle=\"collapse\" data-target=\"#transactionCollapse${transactions[transactionIndex].transaction_id}\">\n                  <div class=\"col-xs-4\">\n                       <h4 class=\"panel-title\">${new Date(transactions[transactionIndex].transaction_date).toLocaleDateString()}</h4>\n                  </div><!-- end col-xs-4 -->\n\n                  <div class=\"col-xs-4 text-center\">\n                       <h4 class=\"panel-title\">${transactions[transactionIndex].transactionItems.length} Item(s)</h4>\n                  </div><!-- end col-xs-4 text-center -->\n\n                  <div class=\"col-xs-4\">\n                       <div class=\"pull-right\">\n                           <div style=\"padding:0;\" class=\"col-xs-8\">\n                                <h4 class=\"panel-title\">${transactions[transactionIndex].totalRevenue.toLocaleString('en-CA', { style: 'currency', currency: 'CAD' })}</h4>\n                           </div><!-- end col-xs-8 -->\n                           <div style=\"padding:0;\" class=\"col-xs-4\">`;\n                            //If the user is privileged to remove transactions'\n                            if(privileged >= 3){\n                                content += `\n                                       <div style=\"padding:0;\" class=\"col-xs-4\">\n                                           <div style=\"margin-top:6px;\" class=\"dropdown\">\n                                               <a id=\"ddMoreOptions\" type=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\" class=\"dropdown-toggle\"><i aria-hidden=\"true\" class=\"fa fa-ellipsis-v fa-2x\"></i></a>\n                                               <ul aria-labelledby=\"ddMoreOptions\" class=\"dropdown-menu\">\n                                                   <li><a href=\"#\" onclick=\"deleteTransaction(${transactions[transactionIndex].transaction_id})\">Remove Transaction</a></li>\n                                               </ul>\n                                           </div><!-- end dropdown -->\n                                       </div><!-- end col-xs-4 -->\n                                    `;\n                                }\n                                content += `\n                           </div><!-- end col-xs-8 -->\n                       </div><!-- end pull-right -->\n                  </div><!-- end col-xs-4 -->\n               </div><!-- end row -->\n           </div><!-- end panel heading -->`;\n        content += `\n           <div class=\"panel-collapse collapse\" role=\"tabpanel\" aria-labelledby=\"transactionHeading${transactions[transactionIndex].transaction_id}\" id=\"transactionCollapse${transactions[transactionIndex].transaction_id}\">\n               <div class=\"panel-body\">`;\n        //For each transactionItem in a trasactions\n        for(var transactionItemsIndex in transactions[transactionIndex].transactionItems){\n            content += `\n                   <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                       <strong>Transaction Type:</strong>\n                       <span style=\"margin-left: 5px;\">${transactions[transactionIndex].transactionItems[transactionItemsIndex].transactionType}</span>\n                   </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                   <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                       <strong>Warranty Type:</strong>\n                       <span style=\"margin-left: 5px;\">`;\n            if(transactions[transactionIndex].transactionItems[transactionItemsIndex].warranty) {\n                content += `${transactions[transactionIndex].transactionItems[transactionItemsIndex].warranty}`;\n            } else {\n                content += `None`;\n            }\n            content += `</span>\n                   </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                   <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                       <strong>Sale Type:</strong>\n                       <span style=\"margin-left: 5px;\">`;\n            if(transactions[transactionIndex].transactionItems[transactionItemsIndex].activation) {\n                content += `${transactions[transactionIndex].transactionItems[transactionItemsIndex].activation}`;\n            } else {\n                content += `None`;\n            }\n            content +=`</span>\n                   </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                   <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                       <strong>Attach (Yes/No):</strong>\n                       <span style=\"margin-left: 5px;\">${transactions[transactionIndex].transactionItems[transactionItemsIndex].attached  === 1 ? 'Yes' : 'No'}</span>\n                   </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                   <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                       <strong>Device Type:</strong>\n                       <span style=\"margin-left: 5px;\">`;\n            if(transactions[transactionIndex].transactionItems[transactionItemsIndex].device) {\n                content += `${transactions[transactionIndex].transactionItems[transactionItemsIndex].device}`;\n            } else {\n                content += `None`;\n            }\n            content += `</span>\n                   </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                   <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                       <strong>Revenue:</strong>\n                       <span style=\"margin-left: 5px;\">${transactions[transactionIndex].transactionItems[transactionItemsIndex].revenue.toLocaleString('en-CA', { style: 'currency', currency: 'CAD' })}</span>\n                   </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                   <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                       <strong>SBS Activation (Yes/No):</strong>\n                       <span style=\"margin-left: 5px;\">${transactions[transactionIndex].transactionItems[transactionItemsIndex].sbs_activation === 1 ? 'Yes' : 'No'}</span>\n                   </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                   <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                       <strong>Number of Accessories:</strong>\n                       <span style=\"margin-left: 5px;\">${transactions[transactionIndex].transactionItems[transactionItemsIndex].num_of_accessories}</span>\n                   </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                   <div class=\"col-xs-12\">\n                       <hr />\n                   </div><!-- end col-xs-12 -->\n               `;\n        }  //end for transactionItems\n        //For each additionalMetric\n        for(var additionalMetricIndex in transactions[transactionIndex].additionalMetricItems){\n            if(transactions[transactionIndex].additionalMetricItems[additionalMetricIndex].additional_metrics_items_type === 1){\n                content += `\n                           <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                               <strong>Learning Sessions:</strong>\n                               <span style=\"margin-left: 5px;\">${transactions[transactionIndex].additionalMetricItems[additionalMetricIndex].additional_metrics_items_count}</span>\n                           </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                       `;\n            } //end if\n            if(transactions[transactionIndex].additionalMetricItems[additionalMetricIndex].additional_metrics_items_type=== 2){\n                content += `\n                           <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                               <strong>AOTMs Sold:</strong>\n                               <span style=\"margin-left: 5px;\">${transactions[transactionIndex].additionalMetricItems[additionalMetricIndex].additional_metrics_items_count}</span>\n                           </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                       `;\n            } //end if\n            if(transactions[transactionIndex].additionalMetricItems[additionalMetricIndex].additional_metrics_items_type === 3){\n                content += `\n                           <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                               <strong>Appointments:</strong>\n                               <span style=\"margin-left: 5px;\">${transactions[transactionIndex].additionalMetricItems[additionalMetricIndex].additional_metrics_items_count}</span>\n                           </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                       `;\n            } //end if\n            if(transactions[transactionIndex].additionalMetricItems[additionalMetricIndex].additional_metrics_items_type === 4){\n                content += `\n                           <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                               <strong>Critters Sold:</strong>\n                               <span style=\"margin-left: 5px;\">${transactions[transactionIndex].additionalMetricItems[additionalMetricIndex].additional_metrics_items_count}</span>\n                           </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                       `;\n            } //end if\n\n            if(transactions[transactionIndex].additionalMetricItems[additionalMetricIndex].additional_metrics_items_type === 5){\n                content += `\n                           <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                               <strong>Donations:</strong>\n                               <span style=\"margin-left: 5px;\">${transactions[transactionIndex].additionalMetricItems[additionalMetricIndex].additional_metrics_items_count}</span>\n                           </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                       `;\n            } //end if\n            if(transactions[transactionIndex].additionalMetricItems[additionalMetricIndex].additional_metrics_items_type === 6){\n                content += `\n                           <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                               <strong>Credit Card Apps:</strong>\n                               <span style=\"margin-left: 5px;\">${transactions[transactionIndex].additionalMetricItems[additionalMetricIndex].additional_metrics_items_count}</span>\n                           </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                       `;\n            } //end if\n        } //end for additionalMetricItems\n        content += `\n               <div class=\"col-xs-12\"></div><!-- end col-xs-12 -->\n               <div style=\"margin-top: 25px;\" class=\"col-xs-6\">\n                   <div class=\"pull-left\">\n                       <strong>Time:</strong>\n                       <span style=\"margin-left: 5px;\">${new Date(transactions[transactionIndex].transaction_date).toLocaleTimeString()}</span>\n                   </div><!-- end pull-left -->\n               </div><!-- end col-xs-6 -->\n               <div style=\"margin-top: 25px;\" class=\"col-xs-6\">\n                   <div class=\"pull-right\">\n                       <strong>Completed By:</strong>\n                       <span style=\"margin-left: 5px;\">`;\n        for(var userIndex in users){\n            if(users[userIndex].t_number === transactions[transactionIndex].t_number){\n                content += `${users[userIndex].first_name} ${users[userIndex].last_name}`;\n            } //end if\n        } //end for\n        content += `</span>\n                   </div><!-- end pull-right -->\n              </div><!-- end col-xs-6 -->\n          </div><!-- end panel-body -->\n       </div><!-- end panel-collapse collapse -->\n   </div> <!-- end panel -->`;\n    } //end for transactions\n\n    $('#transactionContainer').html(content);\n    var content = '';\n//For each transaction\n    for(var transactionIndex in transactions) {\n        //content hold all the HTML for the filtered array\n        content += `\n       <div id=\"transactionID${transactions[transactionIndex].transaction_id}\" class=\"panel\">\n           <div class=\"panel-heading purpleHead\">\n               <div role=\"tab\" class=\"row\" id=\"transactionHeading${transactions[transactionIndex].transaction_id}\" data-toggle=\"collapse\" data-target=\"#transactionCollapse${transactions[transactionIndex].transaction_id}\">\n                  <div class=\"col-xs-4\">\n                       <h4 class=\"panel-title\">${new Date(transactions[transactionIndex].transaction_date).toLocaleDateString()}</h4>\n                  </div><!-- end col-xs-4 -->\n\n                  <div class=\"col-xs-4 text-center\">\n                       <h4 class=\"panel-title\">${transactions[transactionIndex].transactionItems.length} Item(s)</h4>\n                  </div><!-- end col-xs-4 text-center -->\n\n                  <div class=\"col-xs-4\">\n                       <div class=\"pull-right\">\n                           <div style=\"padding:0;\" class=\"col-xs-8\">\n                                <h4 class=\"panel-title\">${transactions[transactionIndex].totalRevenue.toLocaleString('en-CA', { style: 'currency', currency: 'CAD' })}</h4>\n                           </div><!-- end col-xs-8 -->\n                           <div style=\"padding:0;\" class=\"col-xs-4\">`;\n        if(privileged >= 3){\n            content += `\n                                       <div style=\"padding:0;\" class=\"col-xs-4\">\n                                           <div style=\"margin-top:6px;\" class=\"dropdown\">\n                                               <a id=\"ddMoreOptions\" type=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\" class=\"dropdown-toggle\"><i aria-hidden=\"true\" class=\"fa fa-ellipsis-v fa-2x\"></i></a>\n                                               <ul aria-labelledby=\"ddMoreOptions\" class=\"dropdown-menu\">\n                                                   <li><a href=\"#\" onclick=\"deleteTransaction(${transactions[transactionIndex].transaction_id})\">Remove Transaction</a></li>\n                                               </ul>\n                                           </div><!-- end dropdown -->\n                                       </div><!-- end col-xs-4 -->\n                                    `;\n        }\n        content += `\n                           </div><!-- end col-xs-8 -->\n                       </div><!-- end pull-right -->\n                  </div><!-- end col-xs-4 -->\n               </div><!-- end row -->\n           </div><!-- end panel heading -->`;\n        content += `\n           <div class=\"panel-collapse collapse\" role=\"tabpanel\" aria-labelledby=\"transactionHeading${transactions[transactionIndex].transaction_id}\" id=\"transactionCollapse${transactions[transactionIndex].transaction_id}\">\n               <div class=\"panel-body\">`;\n        //For each transactionItem in a trasactions\n        for(var transactionItemsIndex in transactions[transactionIndex].transactionItems){\n            content += `\n                   <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                       <strong>Transaction Type:</strong>\n                       <span style=\"margin-left: 5px;\">${transactions[transactionIndex].transactionItems[transactionItemsIndex].transactionType}</span>\n                   </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                   <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                       <strong>Warranty Type:</strong>\n                       <span style=\"margin-left: 5px;\">`;\n            if(transactions[transactionIndex].transactionItems[transactionItemsIndex].warranty) {\n                content += `${transactions[transactionIndex].transactionItems[transactionItemsIndex].warranty}`;\n            } else {\n                content += `None`;\n            }\n            content += `</span>\n                   </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                   <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                       <strong>Sale Type:</strong>\n                       <span style=\"margin-left: 5px;\">`;\n            if(transactions[transactionIndex].transactionItems[transactionItemsIndex].activation) {\n                content += `${transactions[transactionIndex].transactionItems[transactionItemsIndex].activation}`;\n            } else {\n                content += `None`;\n            }\n            content +=`</span>\n                   </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                   <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                       <strong>Attach (Yes/No):</strong>\n                       <span style=\"margin-left: 5px;\">${transactions[transactionIndex].transactionItems[transactionItemsIndex].attached  === 1 ? 'Yes' : 'No'}</span>\n                   </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                   <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                       <strong>Device Type:</strong>\n                       <span style=\"margin-left: 5px;\">`;\n            if(transactions[transactionIndex].transactionItems[transactionItemsIndex].device) {\n                content += `${transactions[transactionIndex].transactionItems[transactionItemsIndex].device}`;\n            } else {\n                content += `None`;\n            }\n            content += `</span>\n                   </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                   <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                       <strong>Revenue:</strong>\n                       <span style=\"margin-left: 5px;\">${transactions[transactionIndex].transactionItems[transactionItemsIndex].revenue.toLocaleString('en-CA', { style: 'currency', currency: 'CAD' })}</span>\n                   </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                   <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                       <strong>SBS Activation (Yes/No):</strong>\n                       <span style=\"margin-left: 5px;\">${transactions[transactionIndex].transactionItems[transactionItemsIndex].sbs_activation === 1 ? 'Yes' : 'No'}</span>\n                   </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                   <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                       <strong>Number of Accessories:</strong>\n                       <span style=\"margin-left: 5px;\">${transactions[transactionIndex].transactionItems[transactionItemsIndex].num_of_accessories}</span>\n                   </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                   <div class=\"col-xs-12\">\n                       <hr />\n                   </div><!-- end col-xs-12 -->\n               `;\n        }  //end for transactionItems\n        //For each additionalMetric\n        for(var additionalMetricIndex in transactions[transactionIndex].additionalMetricItems){\n            if(transactions[transactionIndex].additionalMetricItems[additionalMetricIndex].additional_metrics_items_type === 1){\n                content += `\n                           <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                               <strong>Learning Sessions:</strong>\n                               <span style=\"margin-left: 5px;\">${transactions[transactionIndex].additionalMetricItems[additionalMetricIndex].additional_metrics_items_count}</span>\n                           </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                       `;\n            } //end if\n            if(transactions[transactionIndex].additionalMetricItems[additionalMetricIndex].additional_metrics_items_type=== 2){\n                content += `\n                           <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                               <strong>AOTMs Sold:</strong>\n                               <span style=\"margin-left: 5px;\">${transactions[transactionIndex].additionalMetricItems[additionalMetricIndex].additional_metrics_items_count}</span>\n                           </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                       `;\n            } //end if\n            if(transactions[transactionIndex].additionalMetricItems[additionalMetricIndex].additional_metrics_items_type === 3){\n                content += `\n                           <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                               <strong>Appointments:</strong>\n                               <span style=\"margin-left: 5px;\">${transactions[transactionIndex].additionalMetricItems[additionalMetricIndex].additional_metrics_items_count}</span>\n                           </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                       `;\n            } //end if\n            if(transactions[transactionIndex].additionalMetricItems[additionalMetricIndex].additional_metrics_items_type === 4){\n                content += `\n                           <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                               <strong>Critters Sold:</strong>\n                               <span style=\"margin-left: 5px;\">${transactions[transactionIndex].additionalMetricItems[additionalMetricIndex].additional_metrics_items_count}</span>\n                           </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                       `;\n            } //end if\n\n            if(transactions[transactionIndex].additionalMetricItems[additionalMetricIndex].additional_metrics_items_type === 5){\n                content += `\n                           <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                               <strong>Donations:</strong>\n                               <span style=\"margin-left: 5px;\">${transactions[transactionIndex].additionalMetricItems[additionalMetricIndex].additional_metrics_items_count}</span>\n                           </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                       `;\n            } //end if\n            if(transactions[transactionIndex].additionalMetricItems[additionalMetricIndex].additional_metrics_items_type === 6){\n                content += `\n                           <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                               <strong>Credit Card Apps:</strong>\n                               <span style=\"margin-left: 5px;\">${transactions[transactionIndex].additionalMetricItems[additionalMetricIndex].additional_metrics_items_count}</span>\n                           </div><!-- end col-xs-12 col-sm-6 col-md-4 -->\n                       `;\n            } //end if\n        } //end for additionalMetricItems\n        content += `\n               <div class=\"col-xs-12\"></div><!-- end col-xs-12 -->\n               <div style=\"margin-top: 25px;\" class=\"col-xs-6\">\n                   <div class=\"pull-left\">\n                       <strong>Time:</strong>\n                       <span style=\"margin-left: 5px;\">${new Date(transactions[transactionIndex].transaction_date).toLocaleTimeString()}</span>\n                   </div><!-- end pull-left -->\n               </div><!-- end col-xs-6 -->\n               <div style=\"margin-top: 25px;\" class=\"col-xs-6\">\n                   <div class=\"pull-right\">\n                       <strong>Completed By:</strong>\n                       <span style=\"margin-left: 5px;\">`;\n        for(var userIndex in users){\n            if(users[userIndex].t_number === transactions[transactionIndex].t_number){\n                content += `${users[userIndex].first_name} ${users[userIndex].last_name}`;\n            } //end if\n        } //end for\n        content += `</span>\n                   </div><!-- end pull-right -->\n              </div><!-- end col-xs-6 -->\n          </div><!-- end panel-body -->\n       </div><!-- end panel-collapse collapse -->\n   </div> <!-- end panel -->`;\n    } //end for transactions\n\n    $('#transactionContainer').html(content);\n} //end render transaction"]}