extends ../layout

block append stylesheet
    link(rel='stylesheet', href='/bower_components/bootstrap-daterangepicker/daterangepicker.css')
    link(rel='stylesheet', href='/stylesheets/selling-hours.css')
    link(href='//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/css/bootstrap-editable.css', rel='stylesheet')
block content
    .row
        .col-xs-12.col-md-10.col-md-offset-1
            h1.page-header #{title}
            if(success_messages)
                .col-md-10.col-md-offset-1.col-xs-12
                    div#successMessage.alert.success.alert-success(role='success')
                        .alert-title
                            i.fa.fa-check.fa-2x
                            strong Great!
                        p#successParagraph !{success_messages}
            //Deletion message, will only show if a user has removed a transaction
            .col-md-10.col-md-offset-1.col-xs-12
                div#deleteMessage.alert.success.alert-success(role='success')
                    .alert-title
                        i.fa.fa-check.fa-2x
                        strong Great!
                        p#removalMessage
    .row.form-group
        .col-xs-12.col-sm-4
            label(for='store') Store:
            select.form-control(id='store', name='store')
                each store, storeIndex in stores
                    option(value='#{store.store_id}') #{store.store_name}
        .col-xs-12.col-sm-4
            label(for='store') &nbsp;
            button.form-btn.btn.btn-lg.btn-block.btn-success.clearSellingHoursButton(name='view', type='button') Clear Selling Hours
        .col-xs-12.col-sm-4
            label(for='dateRange') Date Range:
            .input-group
                span.input-group-addon#iconAddon
                    i.fa.fa-calendar(aria-hidden='true')
                input.form-control(type='text', id='dateRange', name='dateRange', aria-describedby='iconAddon')
        .col-xs-12.col-lg-10.col-lg-offset-1
            hr
    .row
        .col-md-11.col-md-offset-1
            .table-responsive.edit
                table.table-condensed.table-bordered.table-nonfluid-report
                    thead
                        tr
                            th
                            th.sellinghours Sunday
                            th.sellinghours Monday
                            th.sellinghours Tuesday
                            th.sellinghours Wednesday
                            th.sellinghours Thursday
                            th.sellinghours Friday
                            th.sellinghours Saturday
                            th.sellinghours Total
                    tbody#hoursTable
                        tr
                            td
                            th#Sunday
                            th#Monday
                            th#Tuesday
                            th#Wednesday
                            th#Thursday
                            th#Friday
                            th#Saturday
                            th
                        each user, userIndex in users
                            tr(id="#{user.t_number}")
                                td #{user.first_name} #{user.last_name}
                                td(id='SundayHours'+'#{user.t_number}')
                                td(id='MondayHours'+'#{user.t_number}')
                                td(id='TuesdayHours'+'#{user.t_number}')
                                td(id='WednesdayHours'+'#{user.t_number}')
                                td(id='ThursdayHours'+'#{user.t_number}')
                                td(id='FridayHours'+'#{user.t_number}')
                                td(id='SaturdayHours'+'#{user.t_number}')
                                td(id='TotalHours'+'#{user.t_number}')
                        tr
                            td Total Actual
                            td#TotalSundayHours
                            td#TotalMondayHours
                            td#TotalTuesdayHours
                            td#TotalWednesdayHours
                            td#TotalThursdayHours
                            td#TotalFridayHours
                            td#TotalSaturdayHours
                            td#TotalWeekHours

    br
    .row
        .col-md-3.col-md-offset-2
            .table-responsive.edit
                table.table-condensed.table-bordered.table-nonfluid-report.pull-right
                    thead
                        tr
                            th.sellinghours CTs
                            th.sellinghours Revenue
                            th.sellinghours AOTM
                            th.sellinghours LS
                    tbody
                        tr
                            td#CTs
                            td#Rev
                            td#AOTM
                            td#LS
        .col-md-5
            .table-responsive.edit
                table.table-condensed.table-bordered.table-nonfluid-report
                    thead
                        tr
                            th
                            th.sellinghours CC
                            th.sellinghours SBS
                            th.sellinghours Tablets
                    tbody
                        tr
                            th % to CTs
                            td#CTCC
                                | 8%
                            td#CTSBS
                                |7%
                            td#CTTB
                                |7%
                        tr
                            th Budgets
                            td#BDCC
                            td#BDSBS
                            td#BDTB
    br
block append script
    script(src='//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/js/bootstrap-editable.min.js')
    script(src='/bower_components/bootstrap-daterangepicker/moment.min.js')
    script(src='/bower_components/bootstrap-daterangepicker/daterangepicker.js')
    script(src='/javascripts/selling-hours/selling-hours.js')
    script.
        var storeObj = JSON.parse('!{storesObj}');
        var userObj = JSON.parse('!{usersObj}');
        var hourObj = JSON.parse('!{hoursObj}');
        var budgetObj = JSON.parse('!{budgetsObj}');