extends layout

block append stylesheet
    link(rel='stylesheet', href='/bower_components/bootstrap-daterangepicker/daterangepicker.css')
    link(rel='stylesheet', href='/stylesheets/selling-hours.css')
    link(rel='stylesheet', href='/stylesheets/wmp.css')
    //link(href='//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/css/bootstrap-editable.css', rel='stylesheet')

block content
    .row
        .col-xs-12
            h1.page-header #{title}
        if(success_messages)
            .col-xs-12
                div#successMessage.alert.success.alert-success(role='success')
                    .alert-title
                        i.fa.fa-check.fa-2x
                        strong Great!
                    p#successParagraph !{success_messages}
    .row.form-group
        .col-xs-12.col-md-4
            label(for='store') Store:
            select.form-control(id='store', name='store')
                each store, storeIndex in stores
                    option(value='#{store.store_id}' selected) #{store.store_name}

        .col-xs-12.col-sm-4.pull-right
            form.form-horizontal(method='post', action='/users/wmp', role='form', id='updateWeekForm' name='updateWeekForm')
                label(for='dateRange') Date Range:
                .input-group
                    span.input-group-addon#iconAddon
                        i.fa.fa-calendar(aria-hidden='true')
                    input.form-control(type='text', id='dateRange', name='dateRange', aria-describedby='iconAddon')
        .col-xs-12
            hr
    .row
        .col-xs-12.col-sm-12.col-md-12.col-lg-12
            .bs-component
                ul.nav.nav-tabs.responsive.nav-justified
                    li.active
                        a(data-toggle='tab', href='#tab1') CT
                    li
                        a(data-toggle='tab', href='#tab2') REV
                    li
                        a(data-toggle='tab', href='#tab3') LS
                    li
                        a(data-toggle='tab', href='#tab4') KBS
                    li
                        a(data-toggle='tab', href='#tab5') Key Metrics
                .tab-content
                    #tab1.tab-pane.fade.active.in
                        table.metricTable.table.table-striped.table-bordered.table-hover.footable.toggle-medium(style="width: 100%;", id="countTable1")
                            thead
                                tr
                                    td  &nbsp;
                                    td  &nbsp;
                                    td  &nbsp;
                                    td  &nbsp;
                                    td 26.3
                                    td(data-hide='all') 31.6
                                    td(data-hide='all') 3
                                    td(data-hide='all') 14.26%
                            each store, storeIndex in stores
                                tr
                                    th Store: #{store.store_id}
                                    th TM Name
                                    th Selling Hours
                                    th % Hours
                                    th Budgets
                                    th Goal
                                    th Actual
                                    th % To Budget
                            tbody
                                each user, i in users
                                    if user.privileged != 5
                                        tr(id='#{user.t_number}')
                                            td
                                            td #{user.first_name + " " + user.last_name}
                                            td(id='totalHours_' + '#{user.t_number}')
                                            td(id='hoursPercentage_' + '#{user.t_number}') %
                                            td(id='budget' + '#{user.t_number}') %
                                            td 26.3
                                            td 26.3
                                            td &nbsp;
                            tfoot
                                tr
                                    th.pls(colspan='8') ~ Store Actual Totals Listed Below ~
                                tr
                                    td Store Total
                                    td
                                    td(id='storeTotalHours')
                                    td 100%
                                    td $180
                                    td $210
                                    td $555
                                    td 100%

                    #tab2.tab-pane.fade.active
                        table.metricTable.table.table-striped.table-bordered.table-hover.footable.toggle-medium(style="width: 100%;", id="countTable2")
                            thead
                                thead
                                    tr
                                        td  &nbsp;
                                        td  &nbsp;
                                        td  &nbsp;
                                        td  &nbsp;
                                        td 26.3
                                        td(data-hide='all') 31.6
                                        td(data-hide='all') 3
                                        td(data-hide='all') 14.26%
                                each store, storeIndex in stores
                                    tr
                                        th Store: #{store.store_id}
                                        th TM Name
                                        th Selling Hours
                                        th % Hours
                                        th Budgets
                                        th Goal
                                        th Actual
                                        th % To Budget
                                tbody
                                    each user, i in users
                                        if user.privileged != 5
                                            tr(id='#{user.t_number}')
                                                td
                                                td #{user.first_name + " " + user.last_name}
                                                td(id='totalHours_' + '#{user.t_number}')
                                                td(id='hoursPercentage_' + '#{user.t_number}') %
                                                td 26.3
                                                td 26.3
                                                td 26.3
                                                td &nbsp;

                                tfoot
                                    tr
                                        th.pls(colspan='8') ~ Store Actual Totals Listed Below ~
                                    tr
                                        td Store Total
                                        td
                                        td(id='storeTotalHours1')
                                        td 100%
                                        td $180
                                        td $210
                                        td $555
                                        td 100%

                    #tab3.tab-pane.fade.active
                        table.metricTable.table.table-striped.table-bordered.table-hover.footable.toggle-medium(style="width: 100%;", id="countTable3")
                            thead
                                thead
                                    tr
                                        td  &nbsp;
                                        td  &nbsp;
                                        td  &nbsp;
                                        td  &nbsp;
                                        td 26.3
                                        td(data-hide='all') 31.6
                                        td(data-hide='all') 3
                                        td(data-hide='all') 14.26%
                                each store, storeIndex in stores
                                    tr
                                        th Store: #{store.store_id}
                                        th TM Name
                                        th Selling Hours
                                        th % Hours
                                        th Budgets
                                        th Goal
                                        th Actual
                                        th % To Budget
                                tbody
                                    each user, i in users
                                        if user.privileged != 5
                                            tr(id='#{user.t_number}')
                                                td
                                                td #{user.first_name + " " + user.last_name}
                                                td(id='totalHours_' + '#{user.t_number}')
                                                td(id='hoursPercentage_' + '#{user.t_number}') %
                                                td 26.3
                                                td 26.3
                                                td 26.3
                                                td
                                tfoot
                                    tr
                                        th.pls(colspan='8') ~ Store Actual Totals Listed Below ~
                                    tr
                                        td Store Total
                                        td
                                        td(id='storeTotalHours2')
                                        td 100%
                                        td $180
                                        td $210
                                        td $555
                                        td 100%
                    #tab4.tab-pane.fade.active
                        table.metricTable.table.table-striped.table-bordered.table-hover.footable.toggle-medium(style="width: 100%;", id="countTable4")
                            thead
                                thead
                                    tr
                                        td  &nbsp;
                                        td  &nbsp;
                                        td  &nbsp;
                                        td  &nbsp;
                                        td L33
                                        td(data-hide='all') $79.99
                                        td(data-hide='all') 239.98
                                each store, storeIndex in stores
                                    tr
                                        th Store: #{store.store_id}
                                        th TM Name
                                        th Selling Hours
                                        th % Hours
                                        th Accessory Units Per Transaction
                                        th Basket Size
                                        th Average $ Per Handset
                                tbody
                                    each user, i in users
                                        if user.privileged != 5
                                            tr(id='#{user.t_number}')
                                                td
                                                td #{user.first_name + " " + user.last_name}
                                                td(id='totalHours_' + '#{user.t_number}')
                                                td(id='hoursPercentage_' + '#{user.t_number}') %
                                                td 26.3
                                                td 26.3
                                                td 26.3
                                tfoot
                                    tr
                                        th.pls(colspan='8') ~ Store Actual Totals Listed Below ~
                                    tr
                                        td Store Total
                                        td
                                        td(id='storeTotalHours3')
                                        td $180
                                        td 555
                                        td 200
                                        td 205
                    #tab5.tab-pane.fade.active
                        .table-responsive.edit
                            table.metricTable.table.table-striped.table-bordered.table-hover.footable.toggle-medium(style="width: 100%;", id="countTable5")
                                thead
                                    thead
                                        tr
                                            td  &nbsp;
                                            td  &nbsp;
                                            td  &nbsp;
                                            td  &nbsp;
                                            td 26.3
                                            td(data-hide='all') 31.6
                                            td(data-hide='all') 3
                                            td(data-hide='all') 14.26%
                                            td(data-hide='all') 31.6
                                            td(data-hide='all') 3
                                            td(data-hide='all') 31.6
                                            td(data-hide='all') 3
                                            td(data-hide='all') 14.26%
                                    each store, storeIndex in stores
                                        tr
                                            th Store: #{store.store_id}
                                            th TM Name
                                            th Selling Hours
                                            th % Hours
                                            th AOTM Budget
                                            th AOTM Actual
                                            th Telus Credit Card Budget
                                            th Telus Credit Card
                                            th SBS Budget
                                            th SBS Actual
                                            th Tablet Budget
                                            th Tablet Actual
                                            th Warranty %
                                    tbody
                                        each user, i in users
                                            if user.privileged != 5
                                                tr(id='#{user.t_number}')
                                                    td
                                                    td #{user.first_name + " " + user.last_name}
                                                    td(id='totalHours_' + '#{user.t_number}')
                                                    td(id='hoursPercentage_' + '#{user.t_number}') %
                                                    td 26.3
                                                    td 26.3
                                                    td 26.3
                                                    td 26.3
                                                    td 26.3
                                                    td 26.3
                                                    td 26.3
                                                    td 26.3
                                                    td 26.3
                                    tfoot
                                        tr
                                            th.pls(colspan='13') ~ Store Actual Totals Listed Below ~
                                        tr
                                            td Store Total
                                            td
                                            td(id='storeTotalHours4')
                                            td 100%
                                            td $180
                                            td 55
                                            td 100%
                                            td 44
                                            td 100%
                                            td $180
                                            td 55
                                            td 200
                                            td 100%

block append script
    //script(src='//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/js/bootstrap-editable.min.js')
    script(src='/bower_components/bootstrap-daterangepicker/moment.min.js')
    script(src='/bower_components/bootstrap-daterangepicker/daterangepicker.js')
    script(src='/javascripts/wmp.js')
    script.
        var storeObj = JSON.parse('!{storesObj}');
        var userObj = JSON.parse('!{usersObj}');
        var hourObj = JSON.parse('!{hoursObj}');
        var budgetObj = JSON.parse('!{budgetsObj}');
        //var aDate = '!{selectedDate}';
